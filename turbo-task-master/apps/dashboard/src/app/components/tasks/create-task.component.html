<div class="w-full max-w-2xl mx-auto p-4 sm:p-6 lg:p-8">
  <!-- Dialog Header -->
  <div class="flex items-center space-x-3 mb-6 pb-4 border-b border-gray-200 dark:border-gray-700">
    <div class="p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg">
      <mat-icon [fontIcon]="isEditMode ? 'edit' : 'add'" class="text-blue-600 dark:text-blue-400"></mat-icon>
    </div>
    <div>
      <h2 class="text-xl font-semibold text-gray-900 dark:text-white">
        {{ isEditMode ? 'Edit Task' : 'Create New Task' }}
      </h2>
      <p class="text-sm text-gray-600 dark:text-gray-400">
        {{ isEditMode ? 'Update your task details' : 'Fill in the details to create a new task' }}
      </p>
    </div>
  </div>
  
  <!-- Dialog Content -->
  <div class="space-y-6">
    <form [formGroup]="taskForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <!-- Basic Information -->
      <div class="space-y-4">
        <h3 class="text-lg font-medium text-gray-900 dark:text-white flex items-center">
          <mat-icon fontIcon="info" class="mr-2 text-gray-600 dark:text-gray-400"></mat-icon>
          Basic Information
        </h3>
        
        <!-- Title -->
        <mat-form-field  class="w-full">
          <mat-label>Task Title *</mat-label>
          <input 
            matInput 
            formControlName="title" 
            placeholder="Enter task title"
            class="text-gray-900 dark:text-white">
          <mat-error *ngIf="taskForm.get('title')?.hasError('required')">
            Title is required
          </mat-error>
          <mat-error *ngIf="taskForm.get('title')?.hasError('minlength')">
            Title must be at least 3 characters
          </mat-error>
        </mat-form-field>

        <!-- Type -->
        <mat-form-field  class="w-full">
          <mat-label>Task Type *</mat-label>
          <mat-select formControlName="type">
            <mat-option value="work">
              <div class="flex items-center space-x-2">
                <mat-icon fontIcon="work" class="text-sm text-blue-600"></mat-icon>
                <span>Work</span>
              </div>
            </mat-option>
            <mat-option value="personal">
              <div class="flex items-center space-x-2">
                <mat-icon fontIcon="person" class="text-sm text-green-600"></mat-icon>
                <span>Personal</span>
              </div>
            </mat-option>
            <mat-option value="home">
              <div class="flex items-center space-x-2">
                <mat-icon fontIcon="home" class="text-sm text-purple-600"></mat-icon>
                <span>Home</span>
              </div>
            </mat-option>
          </mat-select>
          <mat-error *ngIf="taskForm.get('type')?.hasError('required')">
            Type is required
          </mat-error>
        </mat-form-field>

        <!-- Description -->
        <mat-form-field  class="w-full">
          <mat-label>Description</mat-label>
          <textarea 
            matInput 
            formControlName="description" 
            placeholder="Enter task description"
            rows="3"
            class="text-gray-900 dark:text-white">
          </textarea>
          <mat-hint align="end">{{ getFormControl('description')?.value?.length || 0 }}/500</mat-hint>
        </mat-form-field>
      </div>

      <!-- Task Details -->
      <div class="space-y-4">
        <h3 class="text-lg font-medium text-gray-900 dark:text-white flex items-center">
          <mat-icon fontIcon="settings" class="mr-2 text-gray-600 dark:text-gray-400"></mat-icon>
          Task Details
        </h3>
        
        <!-- Priority -->
        <mat-form-field  class="w-full">
          <mat-label>Priority</mat-label>
          <mat-select formControlName="priority">
            <mat-option [value]="1">
              <div class="flex items-center space-x-2">
                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                <span>Low</span>
              </div>
            </mat-option>
            <mat-option [value]="2">
              <div class="flex items-center space-x-2">
                <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
                <span>Medium</span>
              </div>
            </mat-option>
            <mat-option [value]="3">
              <div class="flex items-center space-x-2">
                <div class="w-2 h-2 bg-orange-500 rounded-full"></div>
                <span>High</span>
              </div>
            </mat-option>
            <mat-option [value]="4">
              <div class="flex items-center space-x-2">
                <div class="w-2 h-2 bg-red-500 rounded-full"></div>
                <span>Urgent</span>
              </div>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Status (only for edit mode) -->
        <mat-form-field  class="w-full" *ngIf="isEditMode">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status">
            <mat-option [value]="0">
              <div class="flex items-center space-x-2">
                <mat-icon fontIcon="pending" class="text-sm text-blue-600"></mat-icon>
                <span>To Do</span>
              </div>
            </mat-option>
            <mat-option [value]="1">
              <div class="flex items-center space-x-2">
                <mat-icon fontIcon="work" class="text-sm text-yellow-600"></mat-icon>
                <span>In Progress</span>
              </div>
            </mat-option>
            <mat-option [value]="2">
              <div class="flex items-center space-x-2">
                <mat-icon fontIcon="check_circle" class="text-sm text-green-600"></mat-icon>
                <span>Done</span>
              </div>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <!-- Due Date -->
        <mat-form-field  class="w-full">
          <mat-label>Due Date</mat-label>
          <input 
            matInput 
            [matDatepicker]="picker" 
            formControlName="dueDate"
            placeholder="Select due date"
            class="text-gray-900 dark:text-white">
          <mat-datepicker-toggle matSuffix [for]="picker">
            <mat-icon matDatepickerToggleIcon fontIcon="calendar_today"></mat-icon>
          </mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>
      </div>
    </form>
  </div>
  
  <!-- Dialog Actions -->
  <div class="flex flex-col sm:flex-row justify-end space-y-2 sm:space-y-0 sm:space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700">
    <button 
      mat-stroked-button 
      (click)="onCancel()"
      [disabled]="isLoading"
      class="w-full sm:w-auto order-2 sm:order-1">
      <mat-icon fontIcon="close" class="mr-2"></mat-icon>
      Cancel
    </button>
    <button 
      mat-raised-button 
      color="primary"
      (click)="onSubmit()"
      [disabled]="taskForm.invalid || isLoading"
      class="w-full sm:w-auto order-1 sm:order-2">
      <mat-icon *ngIf="isLoading" fontIcon="refresh" class="animate-spin mr-2"></mat-icon>
      <mat-icon *ngIf="!isLoading" [fontIcon]="isEditMode ? 'save' : 'add'" class="mr-2"></mat-icon>
      {{ isEditMode ? 'Update Task' : 'Create Task' }}
    </button>
  </div>
</div>
